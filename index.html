<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Eventure</title>
<style>
  :root {
    --bg-color: #f0f8ff;
    --card-color: #ffffff;
    --primary-color: #0077cc;
    --border-color: #a7d4f3;
    --shadow: 0 2px 8px rgba(0,0,0,0.1);
    --text-color: #000000;
    --spacing: 0.5rem;
    /* Category Colors */
    --music-color: #8b5cf6;
    --music-light: #a78bfa;
    --music-gradient: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
    --sports-color: #10b981;
    --sports-light: #34d399;
    --sports-gradient: linear-gradient(135deg, #10b981, #34d399, #6ee7b7);
    --arts-color: #f59e0b;
    --arts-light: #fbbf24;
    --arts-gradient: linear-gradient(135deg, #f59e0b, #fbbf24, #fcd34d);
    --film-color: #ef4444;
    --film-light: #f87171;
    --film-gradient: linear-gradient(135deg, #ef4444, #f87171, #fca5a5);
    --misc-color: #6b7280;
    --misc-light: #9ca3af;
    --misc-gradient: linear-gradient(135deg, #6b7280, #9ca3af, #d1d5db);
  }
  body.dark {
    --bg-color: #0a0a0a;
    --card-color: #1a1a1a;
    --primary-color: #4da8ff;
    --border-color: #333333;
    --text-color: #ffffff;
    /* Enhanced dark mode gradients with more depth */
    --music-gradient: linear-gradient(135deg, #6b46c1, #8b5cf6, #4c1d95);
    --sports-gradient: linear-gradient(135deg, #047857, #10b981, #065f46);
    --arts-gradient: linear-gradient(135deg, #d97706, #f59e0b, #92400e);
    --film-gradient: linear-gradient(135deg, #dc2626, #ef4444, #991b1b);
    --misc-gradient: linear-gradient(135deg, #4b5563, #6b7280, #374151);
  }
  
  body {
    margin: 0;
    font-family: "Segoe UI",sans-serif;
    background: linear-gradient(135deg, #e0f7ff, #f0f8ff, #dbeafe);
    color: var(--text-color);
    padding: var(--spacing) 1rem;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }
  
  body.dark {
    background: linear-gradient(135deg, #0f172a, #1e293b, #0f1419);
  }
  
  /* Dynamic background overlay based on dominant category */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0;
    background: var(--current-category-gradient, transparent);
    transition: opacity 0.8s ease;
    pointer-events: none;
    z-index: -1;
  }
  
  body.category-music::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(139, 92, 246, 0.05), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(167, 139, 250, 0.03), transparent 70%);
    opacity: 1;
  }
  
  body.category-sports::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(16, 185, 129, 0.05), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(52, 211, 153, 0.03), transparent 70%);
    opacity: 1;
  }
  
  body.category-arts::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(245, 158, 11, 0.05), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(251, 191, 36, 0.03), transparent 70%);
    opacity: 1;
  }
  
  body.category-film::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(239, 68, 68, 0.05), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(248, 113, 113, 0.03), transparent 70%);
    opacity: 1;
  }
  
  body.category-misc::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(107, 114, 128, 0.05), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(156, 163, 175, 0.03), transparent 70%);
    opacity: 1;
  }
  
  /* Dark mode category backgrounds - more intense */
  body.dark.category-music::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(107, 70, 193, 0.12), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(139, 92, 246, 0.08), transparent 70%),
                                 radial-gradient(ellipse at 50% 80%, rgba(76, 29, 149, 0.06), transparent 70%);
    opacity: 1;
  }
  
  body.dark.category-sports::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(4, 120, 87, 0.12), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(16, 185, 129, 0.08), transparent 70%),
                                 radial-gradient(ellipse at 50% 80%, rgba(6, 95, 70, 0.06), transparent 70%);
    opacity: 1;
  }
  
  body.dark.category-arts::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(217, 119, 6, 0.12), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(245, 158, 11, 0.08), transparent 70%),
                                 radial-gradient(ellipse at 50% 80%, rgba(146, 64, 14, 0.06), transparent 70%);
    opacity: 1;
  }
  
  body.dark.category-film::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(220, 38, 38, 0.12), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(239, 68, 68, 0.08), transparent 70%),
                                 radial-gradient(ellipse at 50% 80%, rgba(153, 27, 27, 0.06), transparent 70%);
    opacity: 1;
  }
  
  body.dark.category-misc::before {
    --current-category-gradient: radial-gradient(ellipse at 20% 50%, rgba(75, 85, 99, 0.12), transparent 70%),
                                 radial-gradient(ellipse at 80% 20%, rgba(107, 114, 128, 0.08), transparent 70%),
                                 radial-gradient(ellipse at 50% 80%, rgba(55, 65, 81, 0.06), transparent 70%);
    opacity: 1;
  }

  .container{max-width:960px;margin:auto;position:relative;z-index:1;}
  .logo-container{display:flex;justify-content:center;margin:var(--spacing) 0;}
  .logo{height:150px;max-width:100%;}
  .logo-light{display:block;}
  .logo-dark{display:none;}
  body.dark .logo-light{display:none;}
  body.dark .logo-dark{display:block;}
  .search-bar{display:flex;flex-wrap:wrap;gap:var(--spacing);justify-content:center;margin-bottom:1rem;align-items:flex-start;}
  
  /* Category dropdown styles */
  .category-dropdown {
    position: relative;
    display: inline-block;
  }
  
  .dropdown-button {
    padding: 0.5rem 2rem 0.5rem 0.75rem;
    font-size: 1rem;
    background: var(--card-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    min-width: 200px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    user-select: none;
  }
  
  .dropdown-button:hover {
    border-color: var(--primary-color);
  }
  
  .dropdown-button.active {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(0, 119, 204, 0.2);
  }
  
  .dropdown-arrow {
    transition: transform 0.3s ease;
    font-size: 0.8rem;
  }
  
  .dropdown-button.active .dropdown-arrow {
    transform: rotate(180deg);
  }
  
  .dropdown-content {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--card-color);
    border: 1px solid var(--border-color);
    border-top: none;
    border-radius: 0 0 6px 6px;
    box-shadow: var(--shadow);
    z-index: 1000;
    max-height: 250px;
    overflow-y: auto;
    display: none;
  }
  
  .dropdown-content.show {
    display: block;
  }
  
  .dropdown-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    transition: background-color 0.2s ease;
    gap: 0.5rem;
    border-bottom: 1px solid var(--border-color);
  }
  
  .dropdown-item:last-child {
    border-bottom: none;
  }
  
  .dropdown-item:hover {
    background: var(--border-color);
  }
  
  .dropdown-item input[type="checkbox"] {
    display: none;
  }
  
  .dropdown-checkmark {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-color);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    font-size: 12px;
    font-weight: bold;
    flex-shrink: 0;
  }
  
  .dropdown-checkmark.music { border-color: var(--music-color); }
  .dropdown-checkmark.sports { border-color: var(--sports-color); }
  .dropdown-checkmark.arts { border-color: var(--arts-color); }
  .dropdown-checkmark.film { border-color: var(--film-color); }
  .dropdown-checkmark.misc { border-color: var(--misc-color); }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark::after {
    content: "✓";
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark.music {
    background: var(--music-color);
    border-color: var(--music-color);
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark.sports {
    background: var(--sports-color);
    border-color: var(--sports-color);
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark.arts {
    background: var(--arts-color);
    border-color: var(--arts-color);
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark.film {
    background: var(--film-color);
    border-color: var(--film-color);
  }
  
  .dropdown-item input[type="checkbox"]:checked + .dropdown-checkmark.misc {
    background: var(--misc-color);
    border-color: var(--misc-color);
  }
  
  .dropdown-label {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-color);
    user-select: none;
  }
  
  .selected-count {
    font-size: 0.8rem;
    background: var(--primary-color);
    color: white;
    padding: 0.2rem 0.5rem;
    border-radius: 10px;
    margin-left: auto;
  }
  
  /* Dark mode icon transition */
  #darkModeIcon {
    transition: all 0.3s ease;
    display: inline-block;
  }
  
  body.dark #darkModeIcon {
    transform: rotate(180deg);
  }
  
  input[type="text"],select{padding:0.5rem;font-size:1rem;}
  button{padding:0.5rem 1rem;font-size:1rem;background-color:var(--primary-color);color:white;border:none;border-radius:4px;cursor:pointer;transition:background-color 0.3s ease;}
  button:hover{background-color:#005fa3;}
  button:disabled{opacity:0.5;cursor:not-allowed;}
  
  .event-card{
    display:flex;
    background: var(--card-color);
    border:1px solid var(--border-color);
    border-radius:10px;
    box-shadow:var(--shadow);
    padding:1rem;
    margin:1rem 0;
    gap:1rem;
    transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position:relative;
    overflow:hidden;
    backdrop-filter: blur(10px);
  }
  
  .event-card::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:4px;
    height:100%;
    background:var(--category-color, var(--primary-color));
    z-index:1;
  }
  
  /* Category gradient backgrounds for cards */
  .event-card.music {
    --category-color: var(--music-color);
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(139, 92, 246, 0.03) 100%);
  }
  
  .event-card.sports {
    --category-color: var(--sports-color);
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(16, 185, 129, 0.03) 100%);
  }
  
  .event-card.arts {
    --category-color: var(--arts-color);
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(245, 158, 11, 0.03) 100%);
  }
  
  .event-card.film {
    --category-color: var(--film-color);
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(239, 68, 68, 0.03) 100%);
  }
  
  .event-card.misc {
    --category-color: var(--misc-color);
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(107, 114, 128, 0.03) 100%);
  }
  
  /* Enhanced dark mode card gradients */
  body.dark .event-card.music {
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(107, 70, 193, 0.08) 50%, rgba(139, 92, 246, 0.05) 100%);
    border-color: rgba(139, 92, 246, 0.2);
  }
  
  body.dark .event-card.sports {
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(4, 120, 87, 0.08) 50%, rgba(16, 185, 129, 0.05) 100%);
    border-color: rgba(16, 185, 129, 0.2);
  }
  
  body.dark .event-card.arts {
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(217, 119, 6, 0.08) 50%, rgba(245, 158, 11, 0.05) 100%);
    border-color: rgba(245, 158, 11, 0.2);
  }
  
  body.dark .event-card.film {
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(220, 38, 38, 0.08) 50%, rgba(239, 68, 68, 0.05) 100%);
    border-color: rgba(239, 68, 68, 0.2);
  }
  
  body.dark .event-card.misc {
    background: linear-gradient(135deg, var(--card-color) 0%, rgba(75, 85, 99, 0.08) 50%, rgba(107, 114, 128, 0.05) 100%);
    border-color: rgba(107, 114, 128, 0.2);
  }
  
  .event-card:hover{
    transform:scale(1.02) translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }
  
  body.dark .event-card:hover {
    box-shadow: 0 8px 25px rgba(0,0,0,0.4);
  }
  
  .event-card.music .event-title{color:var(--music-color);}
  .event-card.music .buttons button:first-child{background-color:var(--music-color);}
  .event-card.music .buttons button:first-child:hover{background-color:var(--music-light);}
  .event-card.sports .event-title{color:var(--sports-color);}
  .event-card.sports .buttons button:first-child{background-color:var(--sports-color);}
  .event-card.sports .buttons button:first-child:hover{background-color:var(--sports-light);}
  .event-card.arts .event-title{color:var(--arts-color);}
  .event-card.arts .buttons button:first-child{background-color:var(--arts-color);}
  .event-card.arts .buttons button:first-child:hover{background-color:var(--arts-light);}
  .event-card.film .event-title{color:var(--film-color);}
  .event-card.film .buttons button:first-child{background-color:var(--film-color);}
  .event-card.film .buttons button:first-child:hover{background-color:var(--film-light);}
  .event-card.misc .event-title{color:var(--misc-color);}
  .event-card.misc .buttons button:first-child{background-color:var(--misc-color);}
  .event-card.misc .buttons button:first-child:hover{background-color:var(--misc-light);}

  .event-image{width:150px;height:100px;object-fit:cover;border-radius:8px;}
  .event-content{flex:1;}
  .event-title{font-size:1.25rem;font-weight:bold;}
  .buttons{margin-top:0.75rem;}
  .buttons button{margin-right:0.5rem;}
  .pagination{text-align:center;margin:2rem 0;}
  .pagination button.active{background:var(--border-color);}
  .calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);text-align:center;gap:0.25rem;margin-top:1rem;}
  .calendar-grid div{display:flex;justify-content:center;align-items:center;padding:0.75rem;border-radius:6px;background-color:var(--card-color);box-shadow:var(--shadow);cursor:pointer;min-height:40px;}
  .calendar-grid .header{font-weight:bold;cursor:default;}
  .calendar-grid div.today{background-color:gold !important;}
  .calendar-grid div.no-events{opacity:0.4;}
  .calendar-grid div.has-events.music{background-color:var(--music-color);color:white;}
  .calendar-grid div.has-events.sports{background-color:var(--sports-color);color:white;}
  .calendar-grid div.has-events.arts{background-color:var(--arts-color);color:white;}
  .calendar-grid div.has-events.film{background-color:var(--film-color);color:white;}
  .calendar-grid div.has-events.misc{background-color:var(--misc-color);color:white;}
  .calendar-grid div.has-events.mixed{background:linear-gradient(45deg,var(--music-color),var(--sports-color),var(--arts-color));color:white;}
  .calendar-grid div:hover:not(.no-events):not(.header){background-color:var(--border-color);}
  .calendar-grid div.empty{background:none;box-shadow:none;cursor:default;}
  a{color:#cc0077;font-weight:bold;text-decoration:none;}
  @media(max-width:600px){
    .search-bar{flex-direction:column;align-items:center;}
    .category-select {
      min-width: 160px;
      font-size: 0.9rem;
    }
    .event-card{flex-direction:column;align-items:center;}
    .event-title{font-size:1.1rem;}
    .buttons{flex-direction:column;}
    .event-image{width:100%;height:auto;}
  }
  .settings-container{position:absolute;top:0.5rem;right:1rem;}
  #settingsMenu{display:none;position:absolute;right:0;background:var(--card-color);color:var(--text-color);border:1px solid var(--border-color);border-radius:6px;padding:0.5rem;margin-top:0.5rem;box-shadow:var(--shadow);z-index:100;}
  #settingsMenu label{display:block;margin-bottom:0.5rem;}
  .settings-container button{background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--text-color);}
  .back-to-all{text-align:center;margin:1rem 0;}
  .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);backdrop-filter:blur(3px);}
  .modal-content{background-color:var(--card-color);margin:5% auto;padding:0;border-radius:10px;width:90%;max-width:800px;max-height:80vh;overflow:hidden;box-shadow:0 4px 20px rgba(0,0,0,0.3);}
  .modal-header{background-color:var(--primary-color);color:white;padding:1rem;display:flex;justify-content:space-between;align-items:center;}
  .modal-header h3{margin:0;font-size:1.2rem;}
  .close{color:white;font-size:24px;font-weight:bold;cursor:pointer;background:none;border:none;}
  .close:hover{opacity:0.7;}
  .modal-body{padding:0;height:400px;}
  .map-container{width:100%;height:100%;}
  .map-container iframe{width:100%;height:100%;border:none;}
  @media(max-width:600px){
    .modal-content{width:95%;margin:10% auto;}
    .modal-body{height:300px;}
  }
</style>
</head>
<body>
<div class="settings-container">
  <button id="settingsBtn">⚙️</button>
  <div id="settingsMenu">
    <label>🌐 
      <select id="langSelect">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
      </select>
    </label>
    <label><input type="checkbox" id="darkToggle"/> <span id="darkModeIcon">🌙</span> <span id="darkModeText">Dark Mode</span></label>
  </div>
</div>
<div class="container">
  <div class="logo-container">
    <img src="logo-light.png" alt="Light Logo" class="logo logo-light">
    <img src="logo-dark.png" alt="Dark Logo" class="logo logo-dark">
  </div>
  <div class="search-bar">
    <label for="city" id="labelCity">City:</label>
    <input type="text" id="city" placeholder="Enter city"/>
    <label for="category" id="labelCategory">Categories:</label>
    <div class="category-dropdown">
      <div class="dropdown-button" id="categoryDropdownBtn">
        <span id="dropdownText">All Categories</span>
        <span class="dropdown-arrow">▼</span>
      </div>
      <div class="dropdown-content" id="categoryDropdownContent">
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="All" id="categoryAll" checked>
          <span class="dropdown-checkmark"></span>
          <span class="dropdown-label" id="categoryLabelAll">All</span>
        </div>
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="Music" id="categoryMusic">
          <span class="dropdown-checkmark music"></span>
          <span class="dropdown-label" id="categoryLabelMusic">🎵 Music</span>
        </div>
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="Sports" id="categorySports">
          <span class="dropdown-checkmark sports"></span>
          <span class="dropdown-label" id="categoryLabelSports">⚽ Sports</span>
        </div>
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="Arts & Theater" id="categoryArts">
          <span class="dropdown-checkmark arts"></span>
          <span class="dropdown-label" id="categoryLabelArts">🎭 Arts & Theater</span>
        </div>
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="Film" id="categoryFilm">
          <span class="dropdown-checkmark film"></span>
          <span class="dropdown-label" id="categoryLabelFilm">🎬 Film</span>
        </div>
        <div class="dropdown-item" onclick="handleCategoryChange(this)">
          <input type="checkbox" value="Miscellaneous" id="categoryMisc">
          <span class="dropdown-checkmark misc"></span>
          <span class="dropdown-label" id="categoryLabelMisc">🎪 Miscellaneous</span>
        </div>
      </div>
    </div>
    <button id="btnSearch">Search</button>
    <button id="btnCalendar">📅 View Calendar</button>
  </div>
  <div id="calendar" style="display:none;"></div>
  <div class="back-to-all" id="backToAll" style="display:none;">
    <button onclick="showAllEvents()">← Show All Events</button>
  </div>
  <div id="results"></div>
</div>

<!-- Map Modal -->
<div id="mapModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalTitle">Venue Location</h3>
      <button class="close" onclick="closeMapModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="map-container">
        <iframe id="mapFrame" src="" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </div>
</div>
<script>
const apiKey='qGDnOricwKqTRb66e5xyDWPYOWsQGDCT';
let allEvents=[],displayEvents=[],currentLang='en',currentPage=1;
const perPage=10;
let calendarMonth=new Date().getMonth();
let calendarYear=new Date().getFullYear();
let isFilteredByDate = false;
const langData={en:{city:"City:",category:"Categories:",All:"All Categories",Music:"Music",Sports:"Sports","Arts & Theater":"
